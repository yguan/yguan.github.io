define(["require","exports","module","data/tag-group-repository","view/alerts"],function(e,t,n){var r=e("data/tag-group-repository"),i=e("view/alerts");t.name="RenameTagCtrl",t.controller=function(e,t){var n=t.search().tags;e.getTags=function(){return r.getAllTags()},e.oldTags=[],e.newTags=[],e.renameBtn={disabled:!1},e.isUnchanged=function(e,t){return e.length===0||t.length===0},e.go=function(e){t.url(e)},e.closeAlert=function(){i.close(e)},e.rename=function(){e.renameBtn.disabled=!0,i.show(e,{type:i.type.info,msg:"Renaming tags"}),r.rename(_.toLowerCase(e.oldTags),_.toLowerCase(e.newTags),{success:function(){e.oldTags=[],e.newTags=[],i.show(e,{type:i.type.success,msg:"Renamed successfully",hideAfterward:!0}),e.$apply()},failure:function(t){i.show(e,{type:i.type.error,msg:"Failed to rename",withApply:!0})}})},n&&(e.oldTags=n.split(","))}});