angular.module("bootstrap-tagsinput",[]).directive("bootstrapTagsinput",["$timeout",function(e){function t(e,t){return t?angular.isFunction(e.$parent[t])?e.$parent[t]:function(e){return e[t]}:undefined}return{restrict:"EA",scope:{model:"=ngModel"},template:"<select multiple></select>",replace:!1,link:function(n,r,i){$(function(){angular.isArray(n.model)||(n.model=[]);var s=$("select",r);s.tagsinput({typeahead:{items:i.maxVisibleItems&&parseInt(i.maxVisibleItems)||8,source:angular.isFunction(n.$parent[i.typeaheadSource])?n.$parent[i.typeaheadSource]:null},itemValue:t(n,i.itemvalue),itemText:t(n,i.itemtext),tagClass:angular.isFunction(n.$parent[i.tagclass])?n.$parent[i.tagclass]:function(e){return i.tagclass}});for(var o=0;o<n.model.length;o++)s.tagsinput("add",n.model[o]);s.on("itemAdded",function(e){n.model.indexOf(e.item)===-1&&(n.model.push(e.item),n.$apply())}),s.on("itemRemoved",function(e){var t=n.model.indexOf(e.item);t!==-1&&(n.model.splice(t,1),n.$apply())});var u=n.model.slice();n.$watch("model",function(){var e=n.model.filter(function(e){return u.indexOf(e)===-1}),t=u.filter(function(e){return n.model.indexOf(e)===-1}),r;u=n.model.slice();for(r=0;r<t.length;r++)s.tagsinput("remove",t[r]);s.tagsinput("refresh");for(r=0;r<e.length;r++)s.tagsinput("add",e[r])},!0),i.focus&&e(function(){s.tagsinput("focus")},50)})}}}]);